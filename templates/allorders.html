{% extends 'layout.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block body %}

<style>
    @media only screen and (max-width: 600px) {
        #smallScreen {
          display: block;
        }
        #largeScreen {
            display: none;
          }
      }
      @media only screen and (min-width: 600px) {
        #smallScreen {
            display: none;
          }
          #largeScreen {
              display: block;
            }
      }

    #bg {
      /* The image used */

      /* Full height */
      height: 100%;
    background-color: powderblue;

    }
    </style>




<div class="container" style="">
    <div class="col-md-12 col-xs-12 col-lg-12 ">
        <div style="margin-top:1rem; margin-bottom:2rem;">

            <h1 style="text-align: center; font-size:2.5rem;">{{lang.allOrders}}</h1>
            <p style="font-size: 1.5rem;font-weight: bold;  position:absolute; right : 2rem; top:2.5rem;"
                class=" pull-right">{{date}}</p>

        </div>

        <hr style="background-color: red;">


   {% if orders %}

        {% for order in orders  %}
        <div class="row">
            <div class="col-md-12 col-lg-12 col-xs-12">
                <strong>{{lang.orderedDate}} : </strong> {{order.orderedDate}}




                {% if orderedDate.isFinished %}

                <img class=" pull-right" style="width:3rem; height:3rem; ;" src={% static 'img/icon-yes.svg' %}>
                {% else %}

                <img class=" pull-right" style="width:3rem; height:3rem;;" src={% static 'img/icon-no.svg' %}>

                {% endif %}
                <br><br>



                
                <div style="display:inline; word-wrap: break-word; text-align: center;">
                    <img style = "display:inline; width:10rem; height:10rem;" src="{{order.productImage.url}}" alt="">
                    <h3 style = "margin-left:0.5rem; display:inline;">{{order.title}}</h3>
                    <div class="row" style = "margin:1rem 1rem 1rem 0.3rem;">
                        <div id="largeScreen" style = "align-items: center; margin:auto auto;">
                    <table  class="table table-bordered" style = "text-align: center;">
                        <thead>
                            <tr>
                            <th>Miktar</th>
                            <th>Toplam Ücret</th>
                            <th>Sipariş Durumu</th>
                            <th>Kullanıcı Durumu</th>
                        </tr>
                        </thead>
                        <tbody>
                            <tr>
                            <td>{{order.productAmount}}</td>
                            <td>{{order.totalPrice}}</td>
                            <td>{{order.orderStatus}}</td>
                            <td>{{order.isGuest}}</td>
                        </tr>
                        </tbody>

                    </table>
                </div>

                <div id="smallScreen">
                    <table class="table table-bordered">
                        <thead>
                          <tr>
                            <th>Miktar</th>
                            <th>Toplam Ücret</th>
                          </tr>
                        </thead>
        
                        <tbody>
                            <hr>
                            <tr>
                                
                                <td>{{order.productAmount}}</td>
                                <td>{{order.totalPrice}}</td>
                            </tr>
        
        
                            <thead>
                                <tr>
                                    <th>Sipariş Durumu</th>
                                    <th>Kullanıcı Durumu</th>
                                  
                                </tr>
                              </thead>
        
                            <tr>
                                <td>{{order.orderStatus}}</td>
                                <td>{{order.isGuest}}</td>
                            </tr>
                            
                            </tbody>
                            </table>



                </div>

                </div>
                   
                </div>
            


                <form action="/todos/completetodo/" method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="id" value={{todo.id}}>
                    {% if not todo.iscompleted %}
                    <button type="submit" class="btn btn-success pull-right"
                        style="color:white; margin-top:1rem; font-size:0.7rem; font-weight:bolder; width:5rem;">{{lang.complete}}</button>
                    {% else %}


                    <button type="submit" class="btn btn-warning pull-right"
                        style="color:white; margin-top:1rem; font-size:0.7rem; font-weight:bolder; width:5rem;">{{lang.undo}}</button>


                    {% endif %}
                </form>
                {% if todo.iscompleted %}

                <form action="/todos/deletetodo/{{todo.id}}/" method="POST">
                        {% csrf_token %}
                    <button type="submit" class="btn btn-danger pull-right"
                        style="color:white; margin-top:1rem; margin-right:0.3rem;font-size:0.7rem; font-weight:bolder; width:5rem;">{{lang.delete}}</button>
                </form>
                {% endif %}
                <button type="submit"  onclick = "editTodo('{{todo.id}}','{{todo.content}}','{{todo.date}}')" class="btn btn-info pull-right"
                        style="color:white; margin-top:1rem; margin-right:0.3rem;font-size:0.7rem; font-weight:bolder; width:5rem; ">{{lang.edit}}</button>
                        <br><br>
                        <div class="col " id = "editTodoForm{{todo.id}}" style = "display:none;  text-align:center; z-index:10px; margin: auto auto;">

                            <h1>{{lang.addTodo}}</h1>
                                <hr>

                                <form action="/todos/edittodo/{{todo.id}}/" method="POST">
                                    {% csrf_token %}

                                    {{form|crispy}}
                                    <button type="submit" class="btn btn-danger">{{lang.save}}</button>
                                </form>



                            </div>

            </div>

        </div>

        <hr style="background-color: red;">


        {% endfor %}
{% else %}
  <div class="alert alert-warning">
    {{lang.noTodo}}
</div>
{% endif %}

    </div>
</div>
<script  language="JavaScript">
        function editTodo(id,content,date){
            editTodoForm = document.getElementById("editTodoForm" +id);



            if(editTodoForm.style.display !== "none"){
                editTodoForm.style.display = "none";


            }else{
                editTodoForm.style.display = "block"
                formContent = document.getElementById("EditTodoTextAreaId" + id);
                editTodoForm.children[2][1].value = content;
            }
        }



</script>
{% endblock body %}